<style>
#contrastOperate :hover {
	
}

#propertyContrast .property-group {
	margin-bottom : 15px;
}
</style>

<div class="box f14">
	<div class="box-header well" data-original-title>
		<i class="icon-user"></i> 任务详情页
	</div>
	<div class="box-content">
		<div class="fullscreen" style="padding: 10px;">
			<div class="row">
				<div class="row">
					<div class="col-sm-6">
						<h4><span>任务单号：</span><span ng-bind="task.taskId"></span></h4>
					</div>
					<div class="col-sm-offset-4 col-sm-2 text-right" ng-show="task.status==812||task.status==351">
						<button class="btn btn-default" id="contrastOperate" data-toggle="dropdown" type="button">操作</button>
						<div class="dropdown-menu" style="padding: 15px;">
							<button class="btn btn-default btn-block" type="button" ng-click="operateTask('RUNNING')" ng-if="task.status==812">开启任务</button>
							<button class="btn btn-default btn-block" type="button" ng-click="operateTask('CROWLED')" ng-if="task.status==351">完成任务</button>
							<button class="btn btn-default btn-block" type="button" ng-click="operateTask('CROWLED_FAILED')" ng-if="task.status==351">任务异常</button>
						</div>
					</div>
				</div>
				<div>
					<div class="form-group">
						<span class="col-sm-2 text-right">类型：</span>
						<span ng-if="!task.submits.length">非用户申请任务</span>
						<span ng-if="task.submits.length">用户申请任务</span>
						<a ng-click="showSubmits()" ng-show="task.submits.length && !isShowSubmit">展示用户申请<i class="fa fa-angle-double-down"></i></a>
						<a ng-click="hideSubmits()" ng-show="task.submits.length && isShowSubmit">收起用户申请<i class="fa fa-angle-double-up"></i></a>
					</div>
					<div class="form-group">
						<span class="col-sm-2 text-right">创建时间：</span>
						<span ng-bind="task.createDate | date: 'yyyy-MM-dd HH:mm'"></span>
					</div>
					<div class="form-group">
						<span class="col-sm-2 text-right">创建人：</span>
						<span ng-bind="task.creater.userName"></span>
					</div>
					<div class="form-group" ng-show="task.startDate">
						<span class="col-sm-2 text-right">启动时间：</span>
						<span ng-bind="task.startDate | date: 'yyyy-MM-dd HH:mm'"></span>
					</div>
					<div class="form-group" ng-show="task.starter">
						<span class="col-sm-2 text-right">启动人：</span>
						<span ng-bind="task.starter.userName"></span>
					</div>
					<div class="form-group" ng-show="task.completeDate">
						<span class="col-sm-2 text-right">结案时间：</span>
						<span ng-bind="task.completeDate | date: 'yyyy-MM-dd HH:mm'"></span>
					</div>
					<div class="form-group" ng-show="task.completer">
						<span class="col-sm-2 text-right">结案人：</span>
						<span ng-bind="task.completer.userName"></span>
					</div>
					<div class="form-group">
						<span class="col-sm-2 text-right">状态：</span>
						<span ng-if="task.status == 812">未完成</span>
						<span ng-if="task.status == 351">进行中</span>
						<span ng-if="task.status == 813">已完成</span>
						<span ng-if="task.status == 813"><a href="#/audit/crawlTask/{{task.taskId}}/componentList">查看本次维护器件</a></span>
						<span ng-if="task.status == 814">任务失败</span>
					</div>
					<div class="form-group" ng-show="task.file">
						<span class="col-sm-2 text-right">上传文件名：</span>
						<span ng-bind="task.file"></span>
					</div>
					<div class="form-group">
						<span class="col-sm-2 text-right">上次调用程序：</span>
						<span ng-bind="task.contrast.python" ng-if="task.contrast.python"></span>
						<span ng-if="!task.contrast.python">无</span>
					</div>
					<div class="form-group">
						<span class="col-sm-2 text-right">推荐程序：</span>
						<span ng-bind="task.contrast.recommendPython" ng-if="task.contrast.recommendPython"></span>
						<span ng-if="!task.contrast.recommendPython">无</span>
					</div>
					<div class="form-group" ng-show="task.status == 814">
						<span class="col-sm-2 text-right">任务反馈：</span>
						<span ng-bind="task.feedback"></span>
					</div>
					<div class="form-group" ng-show="isShowSubmit">
						<table class="table table-bordered table-striped">
							<tr>
								<th width="30">序号</th>
								<th width="100">一级类目</th>
								<th width="100">二级类目</th>
								<th width="150">三级类目</th>
								<th width="100">品牌</th>
								<th width="100">原厂型号</th>
								<th width="200">网址</th>
							</tr>
							<tr ng-repeat="submit in task.submits">
								<td ng-bind="$index + 1"></td>
								<td ng-bind="submit.gradeOneKiName"></td>
								<td ng-bind="submit.gradeTwoKiName"></td>
								<td ng-bind="submit.gradeThreeKiName"></td>
								<td ng-bind="submit.brName"></td>
								<td ng-bind="submit.code"></td>
								<td ng-bind="submit.url"></td>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="box f14" id="propertyContrast">
	<!-- <div class="box-header well" data-original-title>
		<i class="icon-user"></i> 属性对照关系
	</div>
	<div class="box-content">
		<div class="fullscreen" style="padding: 10px;">
			<div class="row">
				<div class="form-group">
					<span class="col-sm-2 text-right">来源:</span>
					<span ng-bind="task.contrast.resource"></span>
				</div>
				<div class="form-group">
					<span class="col-sm-2 text-right">商城品牌:</span>
					<span ng-bind="task.contrast.b2cBrand.nameCn"></span>
				</div>
				<div class="form-group">
					<span class="col-sm-2 text-right">目标类目:</span>
					<span ng-bind="task.contrast.kindName"></span>
				</div>
				<div class="form-group">
					<span class="col-sm-2 text-right">商城类目:</span>
					<span ng-bind="task.contrast.b2cKind.nameCn"></span>
				</div>
				<div class="form-group">
					<span class="col-sm-2 text-right">来源网址:</span>
					<a href="{{task.contrast.url}}" ng-bind="task.contrast.url" target="blank"></a>
				</div>
				<div class="form-group">
					<h5>参数对照</h5>
					<div class="form-group property-group row" ng-repeat="p in task.contrast.properties | orderBy : 'detno'">
						<div class="col-sm-4">
							<span class="col-sm-5 text-right">商城标准参数：</span><span class="col-sm-7" ng-bind="p.property.labelCn"></span>
						</div>
						<div class="col-sm-7">
							<div class="form-group row">
								<span class="col-sm-5 text-right">目标参数：</span><span class="col-sm-7" ng-bind="p.name"></span>
							</div>
							<div class="form-group row">
								<span class="col-sm-5 text-right">对应商城单位：</span><span class="col-sm-7" ng-bind="p.unit"></span>
							</div>
							<div class="form-group row">
								<span class="col-sm-5 text-right">备注：</span><span class="col-sm-7" ng-bind="p.remark"></span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div> -->
	<div class="box f14">
	<div class="box-header well" data-original-title>
		<i class="icon-user"></i> 基本信息
	</div>
	<div class="box-content">
		<div class="fullscreen" style="padding: 10px;">
			<div class="row">
				<div class="form-group row">
					<label class="col-sm-2 text-right">来源:</label>
					<div class="col-sm-4">
						<span ng-bind="kindContrast.resource" ng-if="!kindContrast.basicChange"></span>
						<input type="text" class="form-control input-sm" ng-model="kindContrast.resource" ng-if="kindContrast.basicChange"/>
					</div>
					<button class="col-sm-offset-4 col-sm-1 btn btn-default btn-sm" ng-click="editBasic()" ng-if="!kindContrast.basicChange && kindContrast.inTask != 2">编辑</button>
					<button class="col-sm-offset-3 col-sm-1 btn btn-default btn-sm" ng-click="saveBasic()" ng-if="kindContrast.basicChange && kindContrast.inTask != 2">保存</button>
					<button class="col-sm-1 btn btn-default btn-sm" ng-click="returnBasic()" ng-if="kindContrast.basicChange && kindContrast.inTask != 2">撤销</button>
				</div>
				<div class="form-group row">
					<label class="col-sm-2 text-right">商城品牌:</label>
					<div class="col-sm-4">
						<span ng-bind="kindContrast.b2cBrand.nameCn" ng-if="!kindContrast.basicChange"></span>
						<input type="text" class="form-control input-sm" ng-model="kindContrast.b2cBrand.nameCn" ng-if="kindContrast.basicChange && kindContrast.inTask != 2"/>
					</div>
				</div>
				<div class="form-group row">
					<label class="col-sm-2 text-right">目标类目:</label>
					<div class="col-sm-4">
						<span ng-bind="kindContrast.kindName" ng-if="!kindContrast.basicChange"></span>
						<input type="text" class="form-control input-sm" ng-model="kindContrast.kindName" ng-if="kindContrast.basicChange && kindContrast.inTask != 2"/>
					</div>
				</div>
				<div class="form-group row">
					<label class="col-sm-2 text-right">商城类目:</label>
					<div class="col-sm-4">
						<span ng-bind="kindContrast.b2cKind.nameCn" ng-if="!kindContrast.basicChange"></span>
						<input type="text" class="form-control input-sm" ng-model="kindContrast.b2cKind.nameCn" ng-if="kindContrast.basicChange && kindContrast.inTask != 2"/>
					</div>
				</div>
				<div class="form-group row">
					<label class="col-sm-2 text-right">来源网址:</label>
					<div class="col-sm-4">
						<a href="{{kindContrast.url}}" ng-bind="kindContrast.url" target="blank" ng-if="!kindContrast.basicChange"></a>
						<input type="text" class="form-control input-sm" ng-model="kindContrast.url" ng-if="kindContrast.basicChange && kindContrast.inTask != 2"/>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="box f14" id="propertyContrast">
	<div class="box-header well" data-original-title>
		<i class="icon-user"></i> 参数对照
	</div>
	<div class="box-content">
		<div class="fullscreen" style="padding: 10px;">
			<div class="form-group">
				<div class="form-group property-group row" ng-repeat="p in kindContrast.properties | orderBy : 'detno'">
					<div class="col-sm-4">
						<label class="col-sm-5 text-right">商城标准参数：</label>
						<div class="col-sm-7">
							<span ng-bind="p.property.labelCn"></span>
						</div>
					</div>
					<div class="col-sm-6">
						<div class="form-group row">
							<span class="col-sm-5 text-right">目标参数：</span>
							<div class="col-sm-7">
								<span ng-bind="p.name" ng-if="!p.isChange"></span>
								<input type="text" class="form-control input-sm" ng-model="p.name" ng-if="p.isChange"/>
								<p ng-if="p.isChange" class="f12"><span class="help-block test-inverse">多个参数使用“，”分隔</span></p>
							</div>
						</div>
						<div class="form-group row">
							<span class="col-sm-5 text-right">对应商城单位：</span>
							<div class="col-sm-7">
								<span ng-bind="p.unit" ng-if="!p.isChange"></span>
								<input type="text" class="form-control input-sm" ng-model="p.unit" ng-if="p.isChange"/>
							</div>
						</div>
						<div class="form-group row">
							<span class="col-sm-5 text-right">备注：</span>
							<div class="col-sm-7">
								<span ng-bind="p.remark" ng-if="!p.isChange"></span>
								<input type="text" class="form-control input-sm" ng-model="p.remark" ng-if="p.isChange"/>
							</div>
						</div>
					</div>
					<div class="col-sm-offset-1 col-sm-1">
						<button class="btn btn-default btn-sm col-sm-offset-6 col-sm-6" title="编辑" ng-click="editProperty(p)" ng-if="!p.isChange && kindContrast.inTask != 2"><i class="fa fa-pencil-square-o"></i></button>
						<button class="btn btn-default btn-sm col-sm-6" title="撤销" ng-click="returnProperty(p)" ng-if="p.isChange && kindContrast.inTask != 2"><i class="fa fa-reply"></i></button>
						<button class="btn btn-default btn-sm col-sm-6" title="保存" ng-click="updateProperty(p)" ng-if="p.isChange && kindContrast.inTask != 2"><i class="fa fa-floppy-o"></i></button>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</div>