<style type="text/css">
.order-start > label {
    display: inline;
    margin-bottom: 0px;
    /* font-weight: normal; */
}

.order-start {
	padding-left: 30px !important;
}

.order-start input[type="checkbox"] {
    display: inline;
}

.order-start input[type="radio"] {
    display: none;
}

input[type="radio"] + label , input[type="checkbox"] + label {
    background-color: #FFF;
    border: 1px solid #C1CACA;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05), inset 0px -15px 10px -12px rgba(0, 0, 0, 0.05);
    padding: 6px;
    display: inline-block;
    position: relative;
    vertical-align: text-bottom;
}

input[type="radio"]:checked + label:after ,input[type="checkbox"]:checked + label:after{
    content: '\2714';
   	clear: both;
    display: block;
    position: absolute;
    top: 0px;
    left: 0px;
    color: #FFF;
    background-color: #7bb4dc;
    width: 100%;
    height: 100%;
    text-align: center;
    font-size: 14px;
    vertical-align: text-top;
    line-height: 16px;
}

.omit {
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.pointer:HOVER {
	cursor: pointer;
}
</style>
<div class="row-fluid sortable">		
	<div class="box">
		<div class="box-header well" data-original-title>
			<i class="icon-user"></i> 平台换货出货单
		</div>
		<div class="box-content">
			<!-- ng-tableStart -->
			<div class="fullscreen" style="padding: 10px;">
				<div class="row">
					<div class="col-sm-1">
						共<span class="badge">{{invoiceForB2TableParams.total()}} </span>条
					</div>
					<div class="col-sm-7">
						<div class="btn-group" role="group" aria-label="...">
							<button type="button" class="btn btn-default" ng-class="{'btn-primary':active=='tobeshipped'}" ng-click="setActive('tobeshipped')">待出货</button>
							<button type="button" class="btn btn-default" ng-class="{'btn-primary':active=='inbound'}" ng-click="setActive('inbound')">待收货</button>
							<button type="button" class="btn btn-default" ng-class="{'btn-primary':active=='received'}" ng-click="setActive('received')">已收货</button>
						</div>
					</div>
					<div class="col-sm-4">
						<div class="input-group">
							<input placeholder="请输入订单号查询" class="form-control"
								ng-model="keyword" ng-search="onSearch()" size="16" type="text">
							<span class="input-group-btn">
								<button class="btn btn-primary" type="button" ng-click="onSearch()">搜索</button>
							</span>
						</div>
					</div>
				</div>
				<table ng-table="invoiceForB2TableParams" class="table table-bordered table-striped" style="margin-top: 10px;">
					<thead>
						<tr>
							<th class="text-center" width="30"></th>
							<th class="text-center" width="120">出货单号</th>
							<th class="text-center" width="80">买方姓名</th>
							<th class="text-center" width="120">总金额</th>
							<th class="text-center" width="100">数量</th>
							<th class="text-center" width="150">创建时间</th>
							<th class="text-center" width="80">出货单状态</th>
							<th class="text-center" width="140" ng-show="active=='tobeshipped'">操作</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="invoice in $data">
							<td class="text-center">{{($index + 1)}}</td>
							<td class="text-center"><a target="_blank" ng-href="admin#/trade/invoiceb2cchange/{{invoice.invoiceid | EncryptionFilter}}">{{invoice.invoiceid}}</a></td>
							<td class="text-center">{{invoice.buyername}}</td>
							<td class="text-center">{{invoice.currencyName}}&nbsp;{{invoice.price | number:2}}</td>
							<td class="text-center">{{invoice.changeQty}}</td>
							<td class="text-center">{{invoice.createtime | date: "yyyy-MM-dd HH:mm"}}</td>
							<td class="text-center">{{invoice.status | statusAndTypeFilter}}</td>
							<td class="text-center" ng-show="active=='tobeshipped'">
								<a ng-show="active=='tobeshipped' && invoice.status == 406" ng-click="ensureSend(invoice)">
									<button type="button" class="btn btn-default btn-sm"
									>确认出货</button>
								</a>
								
							</td>
						</tr>
					</tbody>
				</table>
			</div>
			<!-- ng-tableEnd -->
		</div>
	</div><!--/span-->
	<a id="bottom"></a>
</div><!--/row-->

<!-- 批量  确认出货界面 开始代码  -->
<div ng-if="deliveryStatusEntryCheck && active=='tobeshipped'">
	<div class="row-fluid sortable">
		<div class="box" >
			<div class="box-header well">
				<i class="icon-user"></i> 确认发货操作
			</div>
			<div class="box-content" style="font-size: 15px; ">
				<div ng-repeat="invoice in batchInvoice" class="repeatBorder">
					<div class="divTitle" ng-click="deliveryExpose(invoice)">
						<span role="button"  ng-if="invoice.expose" style="margin-left: 10px;"><i class="fa fa-angle-down"></i>&nbsp;</span>
						<span role="button" ng-if="!invoice.expose" style="margin-left: 10px;"><i class="fa fa-angle-up"></i>&nbsp;</span>
						<span >订单号:</span>
						<span ng-bind="::invoice.invoiceid"></span>
					</div>
					<div ng-if="invoice.expose" class="row" style="margin-left: 32px;">
						<div class="marginleftline ">
							<div class="col-xs-12">
								<span class="col-xs-2"><strong>总金额</strong></span>
								<span class="col-xs-2">{{invoice.currencyName}}&nbsp;{{invoice.price | number:2}}</span>
								<span class="col-xs-2"><strong>数量</strong></span>
								<span class="col-xs-6"  ng-bind="invoice.changeQty"></span>
							</div>
						</div>
						<div class="marginleftline row">
							<span class="col-xs-2"><strong>联系方式</strong></span>
							<span class="col-xs-2" ng-bind="invoice.jsonSpAddress.tel"></span>
							<span class="col-xs-2"><strong>创建时间</strong></span>
							<span class="col-xs-6" ng-bind="invoice.createtime | date: 'yyyy-MM-dd HH:mm'"></span>	
						</div>
						<div class="marginleftline row">
							<span class="col-xs-2"><strong>收货人</strong></span>
							<span class="col-xs-2" ng-bind="invoice.jsonSpAddress.name"></span>
							<span class="col-xs-2"><strong>收货地址</strong></span>
							<span ng-bind="invoice.jsonSpAddress.area" class="col-xs-2"></span>
							<span ng-bind="invoice.jsonSpAddress.detailAddress" class="col-xs-4"></span>
						</div>
					</div>
				</div>
				<div>
					<h3>发货信息</h3>
					<hr style="margin-top: 5px; margin-bottom: 15px;">
				</div>
				<div style="line-height: 30px; margin-left: 33px">
					<div class="row">
						<div class="col-xs-12">
							<span class="col-xs-2">物流公司</span>
							<div class="col-xs-3">
								<select  ng-required="true" ng-model="logistics.companyName" ng-options="exp.name for exp in express">
									<option value="">请选择物流公司名称</option>
								</select>
								<!-- <input type="text" ng-model="logistics.companyName" class="input span12 display-inline" placeholder="物流公司名称" name="companyName" ng-required="true"/> -->
							</div>
							<span class="col-xs-2">快递单号</span>
							<div class="col-xs-3">
								<input type="text" ng-model="logistics.number" class="input span12 display-inline" ng-pattern="/^\+?[1-9][0-9]*$/"  placeholder="快递单号(数字型)" name="logistic_num" ng-required="true"/>
								<span ng-if="!logistics.number" ng-show="(myForm.logistic_num.$dirty||myForm.logistic_num.$touched)&&(myForm.logistic_num.$error.pattern||myForm.logistic_num.$error.required)" 
								class="text-warning col-xs-2">请填写正确的快递号</span>
							</div>
							
						</div>
					</div>
					<div class="row">发货地址信息</div>
					<div ng-repeat="addr in sendAddr" class="row">
						<div class="row-fluid pointer" ng-click="select(addr)">
							<div class="col-xs-3 omit text-left order-start">
								<div class="col-xs-2">
									<input type="radio" ng-checked="addr.id == selectSendAddr.id" id="{{addr.id}}"><label for="{{addr.id}}"></label>
								</div>
								<span class="col-xs-10" ng-bind="::addr.name"></span>
							</div>
							<span class="col-xs-2" ng-bind="::addr.tel"></span>
							<div class="col-xs-7" title="发货地址">
								<span ng-bind="::addr.area"></span>
								<span ng-bind="::addr.detailAddress"></span>
							</div>
						</div>
					</div>
				</div>	
				<div style="text-align: center;">
					<a class="btn btn-primary" ng-click="entryCheck()">录入并核对信息</a>
				</div>
			</div>
		</div>
	</div>
</div>

<div ng-if="deliveryStatusSaveDelivery && active=='tobeshipped'">
	<div class="row-fluid sortable">
		<div class="box" >
			<div class="box-header well">
				<i class="icon-user"></i> 确认发货操作
			</div>
			<div class="box-content" style="font-size: 15px; ">
				<div ng-repeat="invoice in batchInvoice" class="repeatBorder" style="margin-bottom: 30px;" ng-init="invoice.expose=true">
					<div class="divTitle" ng-click="deliveryExpose(invoice)">
						<span role="button" ng-if="invoice.expose" style="margin-left: 10px;"><i class="fa fa-angle-down"></i>&nbsp;</span>
						<span role="button" ng-if="!invoice.expose" style="margin-left: 10px;"><i class="fa fa-angle-up"></i>&nbsp;</span>
						<span ng-bind="::invoice.invoiceid"></span>
						<span ng-bind="::invoice.logistics.companyName" style="margin-left: 20px; margin-right: 20px;"></span>
						<span ng-bind="::invoice.logistics.number"></span>
					</div>
					<div ng-if="invoice.expose" style="margin-left: 30px; font-size: 15px; line-height: 30px;">
						<div class="marginTop10">
							<div class="row">
								<span class="col-xs-2">总金额</span>
								<span class="col-xs-2">{{invoice.currencyName}}&nbsp;{{invoice.price | number:2}}</span>
								<span class="col-xs-2">创建时间</span>
								<span class="col-xs-6" ng-bind="invoice.createtime | date: 'yyyy-MM-dd HH:mm'"></span>
							</div>
						</div>
						<div class="marginTop10">
							<div class="row">
								<span class="col-xs-2">收货人姓名</span>
								<span class="col-xs-2" ng-bind="::invoice.jsonSpAddress.name"></span>
								<span class="col-xs-2">收货人联系方式</span>
								<span class="col-xs-6" ng-bind="::invoice.jsonSpAddress.tel"></span>
							</div>
							<div class="row">
								<span class="col-xs-2">发货人姓名</span>
								<span class="col-xs-2" ng-bind="::selectSendAddr.name"></span>
								<span class="col-xs-2">发货人联系方式</span>
								<span class="col-xs-6" ng-bind="::selectSendAddr.tel"></span>
							</div>
						</div>
						<div class="marginTop10">
							<div class="row">
								<span class="col-xs-2">收货人地址</span>
								<span class="col-xs-2" ng-bind="invoice.jsonSpAddress.area"></span>
								<span class="col-xs-7" ng-bind="invoice.jsonSpAddress.detailAddress"></span>
							</div>
							<div class="row">
								<span class="col-xs-2">发货人地址</span>
								<span class="col-xs-2" ng-bind="::selectSendAddr.area"></span>
								<span class="col-xs-7" ng-bind="::selectSendAddr.detailAddress"></span>
							</div>
						</div>
					</div>
				</div>
				<div style="text-align: center; margin-bottom: 15px;">
					<a class="btn btn-primary" ng-click="back()">返回上一步</a>
					<a class="btn btn-primary" ng-click="confirmAndDelivery()">确认并出货</a>
				</div>
			</div>
		</div>
	</div>
</div>
