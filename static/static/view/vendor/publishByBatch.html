<style type="text/css">
.location {
	line-height: 28px;
}

.location ul {
	border-bottom: solid 1px #ddd;
}

.block {
	padding: 0px 15px;
}

.headerline {
	font-size: 24px;
    font-family: Microsoft YaHei, SimHei, Verdana;
    font-weight: 500;
    line-height: 22px;
    margin: 25px 0 35px -15px;
    clear: both;
    zoom: 1;
    border-top: 1px solid #eee;
    position: relative;
    font-size: 18px;
}

.headerline .index {
	position: absolute;
    top: -12px;
    left: 0;
    width: 6px;
    height: 24px;
    line-height: 24px;
    background: #ff7300;
    color: #fff;
    text-align: center;
    border-radius: 0 2px 2px 0;
    z-index: 2;
}

.headerline .content {
	position: absolute;
    top: -12px;
    left: 6px;
    line-height: 24px;
    padding: 0 15px 0 10px;
    background: #fff;
    z-index: 2;
}

.headerline .end {
	position: absolute;
    top: -12px;
    right: 0;
    line-height: 24px;
    padding-left: 15px;
    background: #fff;
    z-index: 2;
}

.search table.table tr td {
	border-top: none;
}

#searchInput {
	height: 34px;
}

.suggestion {
	position: absolute;
	margin-top: -1px;
	width: 374px;
	background-color: #fff;
	border: 1px solid #bbb;
	border-top: none;
	z-index: 20;
}

.suggestion ul {
	margin-bottom: 0;
}

.suggestion ul li {
	line-height: 20px;
	font-size: 16px;
	padding: 0px 12px;
	color: #0080c0;
	cursor: pointer;
}

.suggestion ul li:hover,.suggestion ul li.active {
	background: #eee;
}
</style>
<!-- location start -->
<div class="location">
	<ul class="list-unstyled list-inline">
		<li class="text-bold">您当前的位置：</li>
		<li>供应商管理中心 <i class="fa fa-angle-double-right"></i></li>
		<li>产品管理 <i class="fa fa-angle-double-right"></i></li>
		<li>批量发布产品</li>
	</ul>
</div>
<!-- location end -->
<!-- block start -->
<div class="block">
	<div class="headerline">
		<div class="index"></div>
		<div class="content f16 text-bold">第一步、请选择您要发布的产品型号，并下载Excel模板</div>
		<div class="end">
			<a ng-click="closeBox('box1Closed')" class="btn btn-default btn-sm text-simple">
				<span ng-if="!box1Closed">收拢 <i class="fa fa-angle-double-up"></i></span>
				<span ng-if="box1Closed">展开 <i class="fa fa-angle-double-down"></i></span>
			</a>
		</div>
	</div>
	<div class="box-item" ng-hide="box1Closed">
		<div class="row search">
			<div class="col-xs-9">
				<p class="f16">请逐个查找您要发布的产品，并加入批量发布</p>
				<div class="form-group form-group-sm has-feedback">
					<div class="input-group">
						<input type="text" id="searchInput" ng-model="keyword" ng-search="onSearch()" ng-focus="onFocus()"
								ng-blur="onBlur()" ng-keyup="onKeyup()" ng-change="onChange(keyword.component)"
								ng-keydown="onKeyDown()" autocomplete="off" class="form-control input-xs ng-pristine ng-valid ng-touched" placeholder="输入要搜索的产品型号">
						<span class="form-control-feedback text-simple"><i class="fa fa-search"></i></span>
						<span class="input-group-btn"><button ng-click="onSearch()"  class="btn btn-default" type="button">搜索</button></span>
					</div>
					<div class="suggestion" ng-show="associate || associateEnter" 
						ng-mouseenter="onAssociateEnter()" 
						ng-mouseleave="onAssociateLeave()">
						<ul class="list-unstyled">
							<li class="text-left" ng-repeat="component in associates" ng-class="{'active': selectIndex == $index}"
								ng-click="onAssociateClick(component.code)" >
								<span ng-bind="component.code"></span>
							</li>
						</ul>
					</div>
				</div>
				<table ng-table="searchTableParams" class="table">
					<thead></thead>
					<tbody>
						<tr ng-repeat="c in $data">
							<td>
								<div class="row">
									<div class="col-xs-10">
										<span class="f16">{{c.code}}</span> 
										<span class="text-muted"><strong>类目：</strong>{{c.kind.nameCn}}</span>
										<span class="text-muted"><strong>品牌：</strong>{{c.brand.nameCn}}</span>
									</div>
									<div class="col-xs-2 text-right">
										<a ng-if="!added(c)" ng-click="addTemplate(c)">加入批量发布</a>
										<strong class="text-green" ng-if="added(c)" ng-disabled="true">已加入</strong>
									</div>
								</div>
							</td>
						</tr>
						<tr ng-if="$data.length == 0">
							<td>
								<div class="text-default">
									没有您要找的产品型号！
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<p>已添加的产品</p>
		<div>
			<table class="table table-striped table-bordered">
				<thead>
					<tr>
						<th>产品类目</th>
						<th>产品品牌</th>
						<th>产品型号</th>
						<th>单位</th>
						<th>发布数量</th>
						<th>最小起订数量</th>
						<th>最小数量1</th>
						<th>价格1</th>
						<th>最小数量2</th>
						<th>价格2</th>
						<th>...</th>
						<th>产品生产日期</th>
						<th>最小包装量</th>
						<th>交货周期</th>
						<th>备注</th>
						<th>发布人</th>
						<th>联系电话</th>
						<th>移除</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="t in template">
						<td>{{t.kind.nameCn}}</td>
						<td>{{t.brand.nameCn}}</td>
						<td>{{t.code}}</td>
						<td>{{t.uint}}</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td><a ng-click="removeTemplate($index)"><i class="fa fa-close"></i></a></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				</tbody>
			</table>
		</div>
		<p>
			<span>添加全部要发布的产品后请</span> <a class="f14 text-default" ng-click="download()">下载Excel模板 <i class="fa fa-download"></i></a>，在Excel模板上录入产品发布信息。
		</p>
	</div>
	<div class="headerline">
		<div class="index"></div>
		<div class="content f16 text-bold">第二步、上传已经填好的Excel文件</div>
		<div class="end">
			<a ng-click="closeBox('box2Closed')" class="btn btn-default btn-sm text-simple">
				<span ng-if="!box2Closed">收拢 <i class="fa fa-angle-double-up"></i></span>
				<span ng-if="box2Closed">展开 <i class="fa fa-angle-double-down"></i></span>
			</a>
		</div>
		<!-- <input role="button" class="btn btn-primary" value="上传文件" /> -->
	</div>
	<div class="box-item" ng-hide="box2Closed">
		<form class="form-horizontal">
			<div class="form-group">
				<label class="control-label col-xs-3" for="xlsFile">请上传已经填写好的Excel文件</label>
				<div class="col-xs-4">
					<input required ng-file-select accept="*.xls,*.xlsx" ng-model="myFiles" type="file" 
			      		ng-multiple="false" class="form-control input-sm" id="xlsFile" name="xlsFile" placeholder="请上传.xls或.xlsx文件"/>
				</div>
				<div class="col-xs-4">
					<button ng-click="upload()" class="btn btn-success btn-sm">确认上传 <i class="fa fa-upload"></i></button>
				</div>
			</div>
			<div class="form-group" ng-if="result">
				<div class="alert alert-success" ng-if="result.success">
					发布成功，共{{result.size}}个产品。
					<ul ng-repeat="cmp in batch">
						<li><span>{{cmp.code}} 批次号: </span><span><a href="vendor#/goodsDetail/{{cmp.batchCode}}">{{cmp.batchCode}}</a></span></li>
					</ul>
				</div>
				<div class="alert alert-danger" ng-if="!result.success">
					<p>数据格式有问题，提示如下：</p>
					<p ng-repeat="a in result.alters">{{a}}<span ng-if="!last">；</span><span ng-if="last">。</span></p>
				</div>
			</div>
		</form>
	</div>
</div>
<!-- block end -->