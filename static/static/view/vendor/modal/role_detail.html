<style>
	/*account*/
	.user-role>.role-item{
		float: left;
	}

	.user-role>.role-item>.icon{
		text-align: center;
		color: #333;
		padding: 1px 3px;
		border-radius: 50%;
		border: 1px solid #333;
	}

	.user-role>.role-item>.icon.info{
		color: #56a022;
		border: 1px solid #56a022;
	}

	.user-role>.role-item>.icon.warning{
		color: #8a6d3b;
		border: 1px solid #8a6d3b;
	}

	.row-operator {
		position: relative;
	}

	.row-operator>.operator-menu {
		position: absolute;
		width: 140px;
		height: 0;
		line-height: 30px;
		padding: 0 10px;
		top: 12px;
		left: 100%;
		background-color: #333;
		border-radius: 0 3px 3px 0;
		opacity: 0;
	}

	.row-operator>.operator-menu a {
		color: #fff;
	}

	.row-operator>.operator-menu a:hover {
		color: #56a022;
	}

	.row-operator:hover>.operator-menu {
		height: 30px;
		opacity: .75;
		-webkit-transition: all 0.25s ease-in-out;
		-moz-transition: all 0.25s ease-in-out;
		transition: all 0.25s ease-in-out;
	}

	.resource-container,.role-container {
		padding: 15px;
		min-height: 645px;
	}

	.simple-list {
		padding: 10px 15px;
	}

	.simple-list>li {
		clear: both;
		display: block;
		height: 26px;
		line-height: 26px;
		padding: 8px 10px 8px 15px;
		position: relative;
	}

	.simple-list>li:before {
		position: absolute;
		left: 0;
		top: 5px;
		content: "."
	}

	.simple-list>li .title {
		width: 200px;
		float: left;
	}

	.simple-list>li .content {
		float: left;
		color: #999;
	}

	.resource-container>.resource-item {
		position: relative;
		padding-bottom: 15px;
	}

	.resource-container>.resource-item>.simple-list {
		display: none;
	}

	.resource-container>.resource-item.active>.simple-list {
		display: block;
	}

	.role-container>.role-list {
		width: 100%;
	}
	.role-container>.role-list:nth-child(1){
		border-bottom: #e8e8e8 1px solid;
	}
	.role-container>.role-list:before,.role-container>.role-list:after {
		display: table;
		content: " ";
		clear: both;
	}

	.role-container>.role-list>.item {
		float: left;
		width: 33%;
		height: 150px;
		padding: 10px 25px;
	}
	.role-container>.role-list .desc h3 a{
		font-size: 16px;
	}
	.role-container>.role-list>.item>.icon{
		float: left;
		width: 60px;
		height: 60px;
		line-height: 60px;
		text-align: center;
		margin-top: 30px;
		color: #56a022;
		font-size: 52px;
		border-radius: 50%;
		-webkit-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.03);
		box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.03);
		background-color: #f3f3f4;
	}
	.role-container>.role-list>.item>.icon i{
		font-size: 36px;
		position: relative;
		top: -10px;
	}
	.role-container>.role-list>.item>.desc {
		margin-left: 80px;
	}

	.userrole-list {
		width: 576px;
		font-size: 12px;
		max-height: 500px;
	}

	.userrole-list:before,.userrole-list:after {
		display: table;
		content: " ";
		clear: both;
	}

	.userrole-list>.item {
		float: left;
		width: 192px;
		height: 120px;
		padding: 5px 10px;
		border: 2px dashed;
		border-color: #fff #ededed #ededed #fff;
		position: relative;
	}

	.userrole-list>.item.checked {
		border-color: #ff7300;
	}

	.userrole-list>.item>.icon{
		float: left;
		width: 60px;
		height: 60px;
		line-height: 60px;
		text-align: center;
		color: #56a022;
		font-size: 36px;
		border-radius: 50%;
		-webkit-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.03);
		box-shadow: inset 0 0 1px rgba(0, 0, 0, 0.03);
		background-color: #f3f3f4;
	}

	.userrole-list>.item>.desc {
		margin-left: 70px;
		text-overflow: ellipsis;
	}

	.userrole-list>.item:hover>.icon {
		background-color: #fff1d0;
	}

	.userrole-list>.item.checked>.checker {
		position: absolute;
		left: -2px;
		top: -2px;
		width: 0;
		height: 0;
		border: 8px solid;
		border-color: #ff7300 #fff #fff #ff7300;
	}

	.choose-inline {
		display: table;
		width: 100%;
		margin-top: 10px;
		padding: 10px;
		table-layout: fixed;
		border-collapse: separate;
		border: 1px solid #e1e1e1;
	}

	.choose-inline>.item {
		display: table-cell;
	}

	.choose-inline> .item >ul.left-list {
		height: 240px;
		overflow-x: hidden;
		overflow-y: scroll;
	}

	.choose-inline> .item >ul >li {
		line-height: 30px;
		padding-left: 5px;
	}

	/*.choose-inline>.item>ul>li:hover {
		background: #f1f1f1;
	}*/

	.choose-inline>.item .list-item.active {
		background: #d3e3fd;
	}

	.choose-inline>.item .list-item:hover {
		background: #d3e3fd;
		cursor: pointer;
	}
	/*.choose-inline>.item>ul>li:hover a,.choose-inline>.item>ul>li.active a {
		color: #ff7300;
		text-decoration: none;
	}*/

	.choose-inline>.item>ul>li>a {
		color: #666666;
	}

	.choose-inline>.item .caret {
		float: left;
		margin-top: 9px;
		margin-right: 5px;
		border-left: 5px solid #c7c7c6;
		border-right: none;
		border-top: 5px solid transparent;
		border-bottom: 5px solid transparent;
	}
	.choose-inline>.item .caret.active {
		border-left: 5px solid transparent;
		border-right: 5px solid transparent;
		border-top: 5px solid #ff8522;
		margin-top: 12px;
	}

	.role-resources input[type="checkbox"] {
		margin-right: 5px;
		height: 16px;
		vertical-align: text-bottom;
		margin-top: 8px;
		cursor: pointer;
		float: right;
	}
	.role-resources >p {
		font-size: 14px;
		color: #666;
	}
	.roleForm .modal-body .form-group >label {
		font-weight: bold;
	}
	.modal-footer {
		padding-top: 0;
		text-align: center;
		border: none;
	}
	.role-check-box {
		float: right;
		margin-right: 5px;
		margin-top: 7px;
		background: url(static/img/icon/check-rule.png) no-repeat;
		background-position-x: -47px;
		background-position-y: 1px;
		width: 13px;
		height: 13px;
	}
	.role-check-box.active {
		background-position-x: -31px;
	}
	.role-check-box.half-active {
		background-position-x: -31px;
		opacity: .5;
	}
	.role-check-box input {
		display: none;
	}
	.mall-default-btn {
		padding: 5px 17px;
		font-size: 14px;
		margin-right: 10px;
		cursor: pointer;
		border: none;
	}
	.mall-default-btn[disabled] {
		cursor: not-allowed;
		opacity: .2;
	}
	/*.mall-default-btn.disabled {
		opacity: .3;
	}*/
	.mall-btn-cancel {
		background: #d0cfcf;
		color: #666;
	}
	.mall-btn-delete {
		background: #f15601;
		color: #fff;
	}
	.mall-btn-submit {
		background: #5078cb;
		color: #fff;
	}
	.roleForm textarea {
		resize: none;
		border-radius: 0;
	}
	.roleForm .modal-body input[type="text"] {
		border-radius: 0;
	}
	.role-tree-level2 >li >div {
		padding-left: 10px;
	}
	.role-tree-level3 >li >div{
		padding-left: 20px;
	}
	.modal-dialog {
		max-height: 500px;
		overflow-y: auto;
	}
</style>

<div class="modal-header">
	<h3 class="modal-title">
		<span ng-bind="role.id?'编辑角色':'添加自定义角色'"></span>
		<button style="position: relative;bottom: 10px;right: -5px;" type="button" class="close" data-dismiss="alert" ng-click="cancel()" aria-label="Close">
			<span aria-hidden="true">×</span>
		</button>
	</h3>
</div>
<form name="roleForm" class="roleForm" novalidate ng-submit="save()">
	<div class="modal-body">
		<div class="form-group">
			<label>角色名称</label> <input type="text" name="desc"
				ng-model="role.desc" class="form-control" placeholder="请输入1-10个字的角色名称"
				required ng-maxlength="10" autofocus ng-readonly="role.isdefault">
			<div class="tooltip in left control-tooltip"
				ng-show="roleForm.desc.$dirty && roleForm.desc.$invalid">
				<div class="tooltip-arrow"></div>
				<span class="tooltip-inner">请输入1-10个字的角色名称</span>
			</div>
		</div>
		<div class="form-group">
			<label>职责范围</label>
			<textarea class="form-control" name="duty" ng-model="role.duty"
				placeholder="请输入角色的具体职责" required
				ng-readonly="role.isdefault" ng-maxlength="50"></textarea>
			<div class="tooltip in left control-tooltip"
				ng-show="roleForm.duty.$dirty && roleForm.duty.$invalid">
				<div class="tooltip-arrow"></div>
				<span class="tooltip-inner">请描述一下角色的具体职责，内容保持在50个字以内</span>
			</div>
		</div>
		<div class="form-group role-resources" ng-if="role.issys != 1 && role.desc != '普通用户'">
			<label>权限分配</label>
			<p class="help-block">给角色分配允许操作的资源</p>
			<div>
				<div class="choose-inline">
					<div class="item">
						<ul class="list-unstyled left-list">
							<li ng-repeat="resource in resources">
								<div ng-click="onItemClick(resource)"  class="list-item" ng-class="{'active':resource.$active}">
									<label class="role-check-box" ng-class="{active:resource.$checked, 'half-active': resource.$halfChecked}">
										<input id="check_{{resource.id}}" type="checkbox"
											   ng-model="resource.$checked"
											   ng-change="onResourceChange(resource)"/>
									</label>
									<a>{{::resource.name}}
										<span class="caret" ng-class="{'active':resource.activeLevel}"></span>
									</a>
								</div>
								<ul class="role-tree-level2" ng-if="resource.activeLevel">
									<li ng-repeat="resourceLevel2 in resource.children">
										<div ng-click="onItemClick(resourceLevel2)" class="list-item" ng-class="{'active':resourceLevel2.$active}">
											<label class="role-check-box" ng-class="{active:resourceLevel2.$checked, 'half-active': resourceLevel2.$halfChecked}">
												<input id="check_{{resourceLevel2.id}}" type="checkbox"
													   ng-model="resourceLevel2.$checked"
													   ng-change="onResourceChange(resourceLevel2)"/>
											</label>
											<a>{{::resourceLevel2.name}}
												<span class="caret" ng-class="{'active':resourceLevel2.activeLevel}"></span>
											</a>
										</div>
										<ul class="role-tree-level3" ng-if="resourceLevel2.activeLevel">
											<li ng-repeat="resourceLevel3 in resourceLevel2.children" >
												<div ng-click="onItemClick(resourceLevel3)" class="list-item" ng-class="{'active':resourceLevel3.$active}">
													<label class="role-check-box" ng-class="{active:resourceLevel3.$checked, 'half-active': resourceLevel3.$halfChecked}">
														<input id="check_{{resourceLevel3.id}}" type="checkbox"
															   ng-model="resourceLevel3.$checked"
															   ng-change="onResourceChange(resourceLevel3)"/>
													</label>
													<a>{{::resourceLevel3.name}}
														<span class="caret"></span>
													</a>
												</div>
											</li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div>
					<div class="item">
						<ul class="list-unstyled">
							<li ng-repeat="item in resourceItems">
								<label class="role-check-box"  ng-class="{active: item.$checked}">
									<input type="checkbox" ng-model="item.$checked" ng-change="onItemChange()" />
								</label>
								{{::item.name}}
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal-footer" ng-if="role.issys != 1 && role.desc != '普通用户'">
		<button class="mall-default-btn mall-btn-cancel" ng-click="cancel()" type="button">取消</button>
		<button class="mall-default-btn mall-btn-delete"
			ng-show="role.id && role.isdefault == 0" ng-click="del()" type="button">删除角色</button>
		<button class="mall-default-btn mall-btn-submit"
				ng-disabled="roleForm.$invalid || !isChanged(role)" type="submit">确认</button>
	</div>
	<div class="modal-footer" ng-if="!(role.issys != 1 && role.desc != '普通用户')">
		<button class="btn btn-default" ng-click="cancel()" type="button">关闭</button>
	</div>
</form>