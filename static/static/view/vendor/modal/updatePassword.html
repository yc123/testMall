<style>
	.password .modal-body .row{
		line-height: 34px;
		font-size: 14px;
		color: #666;
		position: relative;
	}
	.modal-content {
		width: 409px;
	}
	.modal-header {
		background: #5078cb;
		text-align: center;
	}
	.modal-header p {
		color: #fff;
	}
	.modal-header i {
		font-size: 12px;
		position: absolute;
		right: 7px;
		top: 7px;
		color: #fff;
		cursor: pointer;
	}
	.password .modal-body .row >label {
		padding: 0;
		margin-bottom: 5px;
	}
	.password .modal-body .row .col-md-8 {
		padding-left: 0;
		position: relative;
	}
	.password .modal-body .row .col-md-8 input {
		border-radius: 0;
	}
	.modal-footer >button {
		width: 90px;
		height: 28px;
		border: 1px solid #5078cb;
		line-height: 28px;
		text-align: center;
	}
	.modal-footer >button[disabled] {
		cursor: not-allowed;
	}
	.modal-footer >button:first-child {
		background: #fff;
		color: #5078cb;
		margin-right: 10px;
	}
	.modal-footer {
		text-align: center;
		border: none;
		padding: 0 0 25px 0;
	}
	.modal-footer >button:last-child {
		background: #5078cb;
		color: #fff;
	}
	.warn-style {
		color: #cc0000;
		font-size: 14px;
		margin-left: 85px;
		margin-bottom: 10px;
	}
	.password .modal-body .row .col-md-8 img {
		position: absolute;
		right: 20px;
		top: 8px;
	}
	.password .safe-level {
		color: #666;
		display: inline-block;
		font-size: 12px;
	}
	.password .safe-level >span >span {
		display: inline-block;
		height: 14px;
		line-height: 14px;
		background: rgb(255, 90, 0);
		color: #fff;
		margin-right: 1px;
		width: 64px;
		margin-left: 0px;
		font-size: 12px;
		text-align: center;
		position: relative;
		bottom: 1px;
	}
	.password .safe-level >span >span:nth-child(1) {
		margin-left: 1px;
	}
	.password .safe-level >span >span:nth-child(3) {
		background: rgb(255,171,44);
	}
	.password .softkeys {
		position: absolute;
		background: #eee;
		z-index: 10000;
		top: 7px;
		left: 0;
		width: 46em;
		box-shadow: 1px 1px 11px;
		padding: 10px 0;
		border-radius: 5px;
	}
	.modal-dialog {
		min-height: 500px;
	}
</style>
<div ng-click="closeKeyboard()">
	<div class="modal-header">
		<img src="static/img/user/images/update-password.png" alt="">
		<p>修改密码</p>
		<i class="glyphicon glyphicon-remove" ng-click="cancel()"></i>
	</div>
	<form class="password" name="sampleSendForm" ng-submit="ok()">
		<div class="modal-body">
			<!--
            <div class="row">
                <label class="col-md-3 col-sm-3 col text-right">用户：</label>
                <div class="col-md-8 col-sm-8 col">{{::user.userTel}} - {{::user.userName}} </div>
            </div>
            -->
			<div class="row line" ng-class="{'has-success': checkSuccess, 'has-error': checkFailed}">
				<label class="col-md-3 col-sm-3 col text-right">原密码：</label>
				<div class="col-md-8 col-sm-8 col">
					<input ng-model="user.password" name="password" class="form-control input-sm" type="password" ng-blur="checkPassword(user.password)" placeholder="当前密码">
					<img src="static/img/user/images/keyboard.png" alt="" ng-click="reloadKeyboard('showPassword', $event);">
					<div ng-show="showPassword" class="softkeys softkeys1" data-target="input[name='password']"></div>
				</div>
				<div class="col">
					<img ng-show="checkSuccess" src="static/img/user/images/input-check-yes.png" alt="">
					<!--<i ng-show="checkSuccess" class="fa fa-check" style="color:#339933"></i>-->
					<i ng-show="checkFailed" class="fa fa-close" style="color:#CC3333;"></i>
				</div>
			</div>
			<div class="row new-password" ng-class="{'has-success': checkSuccess1, 'has-error': checkFailed1}">
				<label class="col-md-3 col-sm-3 col text-right">新密码：</label>
				<div class="col-md-8 col-sm-8 col">
					<input ng-model="user.newPassword" name="newPassword" ng-blur="checkNewPassword(user.newPassword)" class="form-control input-sm" type="password" placeholder="8~20位字母、数字、符号">
					<!-- <div>密码复杂度</div> -->
					<img src="static/img/user/images/keyboard.png" ng-click="reloadKeyboard('showNewPassword', $event);" alt="">
					<div ng-show="showNewPassword" style="top: 40px;" class="softkeys softkeys2" data-target="input[name='newPassword']"></div>
				</div>
				<div class="col">
					<img ng-show="checkSuccess1" src="static/img/user/images/input-check-yes.png" alt="">
					<!--<i ng-show="checkSuccess1" class="fa fa-check" style="color:#339933"></i>-->
					<!--<i ng-show="checkFailed1" class="fa fa-close" style="color:#CC3333;"></i>-->
				</div>
				<div class="safe-level" ng-hide="checkFailed1">安全等级：
					<span>
					<span ng-show="secLevel>=1">弱</span>
					<span ng-show="secLevel>=2">中</span>
					<span ng-show="secLevel>=3">强</span>
				</span>
				</div>
			</div>
			<div class="warn-style" ng-show="checkFailed1">密码为8-20字符的英文、数字混合密码</div>
			<div class="row line" ng-class="{'has-success': checkSuccess2, 'has-error': checkFailed2}">
				<label ng-model="user.newPassword1" class="col-md-3 col-sm-3 col text-right">重复新密码：</label>
				<div class="col-md-8 col-sm-8 col">
					<input ng-model="user.newPassword1" name="password1" ng-blur="checkNewPassword1(user.newPassword1)" class="form-control input-sm" type="password" placeholder="重复新密码">
					<img src="static/img/user/images/keyboard.png" ng-click="reloadKeyboard('showPassword1', $event)"  alt="">
					<div ng-show="showPassword1" class="softkeys softkeys3" data-target="input[name='password1']"></div>
				</div>
				<div class="col">
					<img ng-show="checkSuccess2" src="static/img/user/images/input-check-yes.png" alt="">
					<!--<i ng-show="checkSuccess2" class="fa fa-check" style="color:#339933"></i>-->
					<!--<i ng-show="checkFailed2" class="fa fa-close" style="color:#CC3333;"></i>-->
				</div>
			</div>
			<div class="warn-style" ng-show="checkFailed2">两次输入的密码不一致</div>
		</div>
		<div class="modal-footer">
			<button ng-click="cancel()" type="button">取消</button>
			<button type="submit">确定</button>
		</div>
	</form>
</div>
<script>
	function resetKeyboard(str) {
		$(str).softkeys({
			target : $(str).data('target'),
			layout : [
				[
					['`','~'],
					['1','!'],
					['2','@'],
					['3','#'],
					['4','$'],
					['5','%'],
					['6','^'],
					['7','&'],
					['8','*'],
					['9','('],
					['0',')'],
					['-', '_'],
					['=','+'],
					'delete'
				],
				[
					'q','w','e','r','t','y','u','i','o','p',
					['[','{'],
					[']','}']
				],
				[
					'capslock',
					'a','s','d','f','g','h','j','k','l',
					[';',':'],
					["'",'"'],
					['\\','|']
				],
				[
					'shift',
					'z','x','c','v','b','n','m',
					[',','<'],
					['.','>'],
					['/','?'],
					['@']
				]
			]
		});
	}
	resetKeyboard('.softkeys1');
	resetKeyboard('.softkeys2');
	resetKeyboard('.softkeys3');
	$('.softkeys').on('click', function (event) {
		event.stopPropagation();
	})
</script>