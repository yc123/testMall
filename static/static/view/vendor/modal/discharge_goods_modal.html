<style>
.row {
	padding-top: 15px;
	padding-left: 20px;
	padding-right: 20px;
	font-size: 14px;
}
.head {
	font-size: 24px;
}
.alldis {
	margin-bottom: 15px;
}
.modal-head {
	border-bottom: 1px solid #ddd;
}
.modal-body {
	line-height : 20px;
}
.mid-qty-box>i {
	position: absolute;
	left: 50%;
	top: -15px;
	margin-left: -6px;
}
.fwidth {
	width: 90%;
}
.row .input-group {
	margin-top : 0px;
	margin-bottom: 20px;
} 
label {
	text-align : right;
}
</style>
<div class="modal-head">
<div class="row">
	<div class="col-xs-4 head">修改库存信息</div>
	<div class="col-xs-2 col-xs-offset-5 alldis"><button class="btn btn-warning" ng-click="dischargeAll()">全部下架</button></div>
</div>
</div>
<div class="modal-body">
	<form name="myForm">
		<div class="row">
				<label class="col-xs-2">类目：</label>
				<span  class="col-xs-4" ng-bind="goods.kindNameCn"></span>
				<label class="col-xs-2">品牌：</label>
				<span class="col-xs-4" ng-bind="goods.brandNameCn"></span>
		</div>
		<div class="row">
			<label class="col-xs-2">型号：</label>
			<span  class="col-xs-4" ng-bind="goods.code"></span>
			<label class="col-xs-2">币别：</label>
			<span  class="col-xs-4" ng-bind="goods.currencyName"></span>
		</div>
		<div class="row">
			<label class="col-xs-2">库存类型：</label>
			<span  class="col-xs-4" ng-if="goods.original==1311">现货</span>
			<span  class="col-xs-4" ng-if="goods.original==1312">呆滞库存</span>
			<label class="col-xs-2">库存数量：</label>
			<div class="col-xs-4">
				<span  ng-bind="goods.oldReserve"></span>&nbsp;&nbsp;PCS
			</div>
			
			<!-- <span  class="col-xs-4" ng-if="goods.original==1313">废料</span> -->
			<!--<label class="col-xs-2">税率：</label>
			<span  class="col-xs-4"><span ng-bind="goods.tax"></span>%</span>-->
<!-- 			<label class="col-xs-2">7天无理由退货：</label>
			<span  class="col-xs-4" ng-if="goods.returnInWeek==1">支持</span>
			<span  class="col-xs-4" ng-if="goods.returnInWeek==0">不支持</span> -->
		</div>
		<div class="row">
			<label class="col-xs-2">生产日期：</label>
			<div class="col-xs-4">
				<div class="input-group input-group-xs input-trigger">
					<input type="text" ng-model="goods.produceDate" id="produceDate"
						class="input input-sm form-control" placeholder="点击选择产品的生产日期" readonly="readonly"
						datepicker-popup="yyyy-MM-dd" is-open="goods.$produceOpen"
						ng-required="true" current-text="今天"
						clear-text="清除" close-text="关闭"
						datepicker-options="{formatDayTitle: 'yyyy年M月', formatMonth: 'M月', showWeeks: false}"
						ng-click="openDatePicker($event, '$produceOpen')"> 
					<span class="input-group-btn">
						<button type="button" class="btn btn-default btn-sm"
							ng-click="openDatePicker($event, '$produceOpen')">
							<i class="fa fa-calendar"></i>
						</button>
					</span>
				</div>
			</div>
		</div>
		<!--<div class="row">
			<label class="col-xs-2">最小包装量：</label>
			<div class="col-xs-4">
				<div class="input-group input-group-xs">
					<input type = "number" class="input input-sm form-control"  min="0" ng-model="goods.minPackQty"  ng-pattern="/^[1-9]\d*$/">
					<span class="input-group-addon">PCS</span>
				</div>
			</div>
			<label class="col-xs-2">起订量：</label>
			<div class="col-xs-4">
				<div class="input-group input-group-xs">
					<input type = "number" class="input input-sm form-control"  min="0" ng-model="goods.minBuyQty" ng-pattern="/^[1-9]\d*$/">
					<span class="input-group-addon">PCS</span>	
				</div>
			</div>
		</div>-->
		<div class="row">		
			<label class="col-xs-2" ng-show="goods.currencyName == 'RMB' || goods.currencyName == 'RMB-USD'">大陆交货周期：</label>
			<div class="col-xs-4" ng-show="goods.currencyName == 'RMB' || goods.currencyName == 'RMB-USD'">
				<div class="input-group input-group-xs">
					<!-- <input name="delivery" type="number" class="form-control" id="delivery" ng-model="goods.deliveryTime" ng-pattern="/^[1-9]\d*$/" required="required" ng-blur="setdeliveryTime(goods.deliveryTime)"> -->
					<select class="form-control" ng-model="goods.deliveryDemTime" ng-required="true">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>						
					</select>
					<span class="input-group-addon text-num">天</span>
				</div>
			</div>
			<label class="col-xs-2" ng-show="goods.currencyName == 'USD' || goods.currencyName == 'RMB-USD'">香港交货周期：</label>
			<div class="col-xs-4" ng-show="goods.currencyName == 'USD' || goods.currencyName == 'RMB-USD'">
				<div class="input-group input-group-xs">
					<!-- <input name="delivery" type="number" class="form-control" id="delivery" ng-model="goods.deliveryTime" ng-pattern="/^[1-9]\d*$/" required="required" ng-blur="setdeliveryTime(goods.deliveryTime)"> -->
					<select class="form-control" ng-model="goods.deliveryHKTime" ng-required="true">
						<option value="1">1</option>
						<option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
					</select>
					<span class="input-group-addon text-num">天</span>
				</div>
			</div>
		</div>
		
		<!-- 分段价格 start -->
		<div class="form-group row">
			<!--<label for="kind" class="col-xs-2 control-label"></label>-->
			<div class="col-xs-11">
				<div class="row form-group">
					<div class="col-xs-4 col-xs-offset-1 text-center text-bold">分段数量</div>
					<div class="col-xs-3 text-center text-bold" ng-class="{'col-xs-offset-2':goods.currencyName == 'RMB'}"
						 ng-if="goods.currencyName == 'RMB' || goods.currencyName == 'RMB-USD'">人民币分段单价</div>
					<div class="col-xs-3 text-center text-bold" ng-class="{'col-xs-offset-2':goods.currencyName == 'USD'}"
						 ng-if="goods.currencyName == 'USD' || goods.currencyName == 'RMB-USD'">美元分段单价</div>
				</div>
				<div class="row form-group" ng-repeat="qp in goods.prices">
					<div class="col-xs-4 col-xs-offset-1 text-center">
						<div class="input-group">
							<!-- <span class="input-group-addon text-num">≥</span> -->
							<input ng-model="qp.start" type="text" class="form-control input-sm" placeholder="分段数量" ng-disabled="true"/>
							<span class="input-group-addon text-num">
								<i class="fa fa-long-arrow-right"></i>
							</span>
							<input ng-model="qp.end" type="text" class="form-control input-sm" placeholder="分段数量" ng-disabled="true"/>
						</div>
					</div>
					<div class="col-xs-3 text-center" ng-class="{'col-xs-offset-2':goods.currencyName == 'RMB'}"
						 ng-if="goods.currencyName == 'RMB' || goods.currencyName == 'RMB-USD'">
						<div class="input-group">
							<span class="input-group-addon text-num">￥</span>
							<input ng-model="qp.rMBPrice" type="text" class="form-control input-sm"
								placeholder="人民币单价" ng-parttern="/^((\d)|(\d+\.?\d+))$/" required="required"/>
							<span class="input-group-addon text-num" >/ pcs</span>
						</div>
					</div>
					<div class="col-xs-3  text-center" ng-class="{'col-xs-offset-2':goods.currencyName == 'USD'}"
						 ng-if="goods.currencyName == 'USD' || goods.currencyName == 'RMB-USD'">
						<div class="input-group">
							<span class="input-group-addon text-num">$</span>
							<input ng-model="qp.uSDPrice" type="text" class="form-control input-sm"
								   placeholder="美元单价" ng-parttern="/^((\d)|(\d+\.?\d+))$/" required="required"/>
							<span class="input-group-addon text-num" >/ pcs</span>
						</div>
					</div>
					<div class="col-xs-1 text-left">
						<!-- <button class="btn btn-default btn-sm"><i class="fa fa-plus"></i></button> -->
						<button ng-if="!$first" class="btn btn-default btn-sm" ng-click="deleteQtyPrice($index)" 
							title="取消这个分段设置"><i class="fa fa-trash"></i>
						</button>
					</div>
				</div>
				<div class="row form-group">
					<div class="col-xs-4 col-xs-offset-1 text-center mid-qty-box">
						<i class="fa fa-angle-up fa-lg"></i>
						<input ng-model="midQty" type="number" class="form-control input-sm" placeholder="分段数量"  ng-pattern="/^[1-9]\d*$/" />
					</div>
					<div class="col-xs-4 text-left">
						<button class="btn btn-info btn-sm" ng-click="setMidQty(midQty)" ng-disabled="midQty == null">
							<i class="fa fa-plus"></i> 插入分段
						</button>
					</div>
				</div>
			</div>
		</div>
		<!-- 分段价格 end -->
		
		<div class="row">
			<label class="col-xs-2">下架数量：</label>
			<div class="col-xs-4">
				<div class="input-group input-group-xs">
					<input class="input input-sm form-control" type="number" max="{{oldreserve}}" ng-model="disnum" placeholder="请输入下架数量" ng-change="changeReserve(disnum)" ng-pattern="/^[1-9]\d*$/" />
					<span class="input-group-addon">PCS</span>	
				</div>
			</div>
			<label class="col-xs-2">新库存：</label>
			<div class="col-xs-4">
				<div class="input-group input-group-xs">
					<input class="input input-sm form-control" type="number" min="0"  ng-model="newreserve" ng-change="changeDisnum(newreserve);"  ng-pattern="/^[1-9]\d*$/">
					<span class="input-group-addon">PCS</span>	
				</div>
			</div>
		</div>
		<div class="row">
			<label class="col-xs-2">备注：</label>
			<div class="col-xs-10" >
				<textarea rows="3" class="fwidth form-control" ng-model="goods.remark"></textarea>
			</div>
		</div>
		<div class="row">
			<button class="btn btn-success col-xs-2 col-xs-offset-3" ng-click="updateGoods(disnum)" ng-disabled="myForm.$invalid">保存修改</button>
			<button class="btn btn-info col-xs-2 col-xs-offset-3" ng-click="cancel()">取消</button>
		</div>
	</form>	
</div>
